define(["exports","../../method/bs-component","../../method/btn-animation","../../method/data-table"],(function(t,e,i,o){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=l(e),i=l(i),o=l(o);var a={template:'<div class="playlist p-2"><div v-if="activePlaylist.videos.length" class="h4 text-center"><a href="#" onclick="javascript:return false;" @click="popoutPlayer()">{{ activePlaylist.name }} <font-awesome-icon :icon="[&#39;fas&#39;, &#39;external-link-alt&#39;]" class="fa-fw"></font-awesome-icon></a></div><div v-if="!activePlaylist.videos.length" class="h4 text-center">{{ activePlaylist.name }}</div><div class="table-responsive"><table id="playlistTable" class="table table-striped table-hover table-dark data-table"><thead><tr><th scope="col">#</th><th scope="col">{{ $t(&#39;name&#39;) }}</th><th scope="col">{{ $t(&#39;duration&#39;) }}</th><th scope="col">{{ $t(&#39;start&#39;) }}</th><th scope="col">{{ $t(&#39;end&#39;) }}</th><th scope="col">{{ $t(&#39;played&#39;) }}</th><th scope="col">{{ $t(&#39;skipped&#39;) }}</th><th scope="col">{{ $t(&#39;cmd&#39;) }}</th><th scope="col" data-orderable="false"></th></tr></thead><tbody>\x3c!-- eslint-disable-next-line vue/require-v-for-key --\x3e<tr v-for="(videoItem, index) in activePlaylist.videos" class="video"><td class="index"><div v-if="index > 0" class="move move-up" @click="moveVideo(videoItem, -1, activePlaylist)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;chevron-right&#39;]" class="fa-fw" :transform="{rotate: -90}"></font-awesome-icon></div><div v-if="index + 1 < activePlaylist.videos.length" class="move move-down" @click="moveVideo(videoItem, 1, activePlaylist)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;chevron-right&#39;]" class="fa-fw" :transform="{rotate: 90}"></font-awesome-icon></div>{{ index + 1 }}</td><td><font-awesome-icon :icon="getVideoPlayerIcon(videoItem.player)" class="fa-fw mr-2"></font-awesome-icon>{{ videoItem.name }}<span v-if="videoItem.subName.length" class="text-muted"> - {{ videoItem.subName }}</span></td><td><span class="text-nowrap">{{ videoItem.duration|formatDuration() }}</span></td><td><span class="text-nowrap">{{ videoItem.start|formatDateTime($t(&#39;time-long-suffix&#39;)) }}</span></td><td><span class="text-nowrap">{{ videoItem.end|formatDateTime($t(&#39;time-long-suffix&#39;)) }}</span></td><td :data-order="videoItem.played ? &#39;1&#39; : &#39;0&#39;" :data-search="videoItem.played ? &#39;played-yes&#39; : &#39;played-no&#39;"><div class="custom-control custom-switch"><input :id="&#39;video-played-&#39; + index" v-model="activePlaylist.videos[index].played" type="checkbox" class="custom-control-input"><label class="custom-control-label" :for="&#39;video-played-&#39; + index">&nbsp;</label></div></td><td :data-order="videoItem.skipped ? &#39;1&#39; : &#39;0&#39;" :data-search="videoItem.skipped ? &#39;skipped-yes&#39; : &#39;skipped-no&#39;"><div class="custom-control custom-switch"><input :id="&#39;video-skipped-&#39; + index" v-model="activePlaylist.videos[index].skipped" type="checkbox" class="custom-control-input"><label class="custom-control-label" :for="&#39;video-skipped-&#39; + index">&nbsp;</label></div></td><td :data-order="getVideoCommands(videoItem).length ? &#39;1&#39; : &#39;0&#39;"><span v-if="videoItem.titleCmd === &#39;&#39; &amp;&amp; videoItem.gameCmd === &#39;&#39;">-</span><button v-if="videoItem.titleCmd !== &#39;&#39; || videoItem.gameCmd !== &#39;&#39;" type="button" class="btn btn-sm btn-primary" data-toggle="popover" :title="$tc(&#39;command&#39;, 2)" :data-content="getVideoCommands(videoItem)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;terminal&#39;]" class="fa-fw"></font-awesome-icon></button></td><td class="text-center"><span class="text-nowrap"><button type="button" class="btn btn-sm btn-primary btn-animation mr-2" data-animation-success="success" data-animation-error="error" data-toggle="tooltip" data-placement="top" :title="$t(&#39;save&#39;)" @click="updateVideo(videoItem, index, activePlaylist)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;save&#39;]" class="fa-fw"></font-awesome-icon></button><button type="button" class="btn btn-sm btn-primary mr-2" data-toggle="tooltip" data-placement="top" :title="$t(&#39;update&#39;)" @click="showVideoForm(videoItem, index)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;edit&#39;]" class="fa-fw"></font-awesome-icon></button><button type="button" class="btn btn-sm btn-danger" data-toggle="tooltip" data-placement="top" :title="$t(&#39;remove-from-playlist&#39;)" @click="removeVideo(videoItem, index, activePlaylist)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;trash-alt&#39;]" class="fa-fw"></font-awesome-icon></button></span></td></tr></tbody></table></div><div class="controls text-right pt-3"><div class="btn-group dropup"><button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;cogs&#39;]" class="fa-fw"></font-awesome-icon></button><div class="dropdown-menu dropdown-menu-right"><a href="#" class="dropdown-item bg-danger" onclick="javascript:return false;" @click="clearActivePlaylist()">{{ $t(&#39;clear-playlist&#39;) }}</a>\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="dropdown-divider"></div><a href="#" class="dropdown-item bg-warning" onclick="javascript:return false;" @click="removeVideosByFlagFromActivePlaylist(&#39;played&#39;, true)">{{ $t(&#39;remove-played-videos&#39;) }}</a><a href="#" class="dropdown-item bg-warning" onclick="javascript:return false;" @click="removeVideosByFlagFromActivePlaylist(&#39;skipped&#39;, true)">{{ $t(&#39;remove-skipped-videos&#39;) }}</a>\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="dropdown-divider"></div><a href="#" class="dropdown-item bg-primary" data-toggle="modal" data-target="#all-playlists">{{ $t(&#39;all-playlists&#39;) }}</a><a href="#" class="dropdown-item bg-primary" onclick="javascript:return false;" @click="resetActivePlaylist()">{{ $t(&#39;reset-playlist&#39;) }}</a><a href="#" class="dropdown-item bg-primary" data-toggle="modal" data-target="#remove-playlist">{{ $t(&#39;remove-playlist&#39;) }}</a><a href="#" class="dropdown-item bg-primary" data-toggle="modal" data-target="#merge-playlists">{{ $t(&#39;merge-playlists&#39;) }}</a><a href="#" class="dropdown-item bg-primary" data-toggle="modal" data-target="#switch-playlist">{{ $t(&#39;switch-playlist&#39;) }}</a><a href="#" class="dropdown-item bg-primary" onclick="javascript:return false;" @click="showPlaylistForm()">{{ $t(&#39;update-playlist&#39;) }}</a><a href="#" class="dropdown-item bg-primary" data-toggle="modal" data-target="#playlist-form">{{ $t(&#39;add-playlist&#39;) }}</a>\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="dropdown-divider"></div><a href="#" class="dropdown-item bg-primary" data-toggle="modal" data-target="#video-form">{{ $t(&#39;add-video&#39;) }}</a></div></div></div><div id="all-playlists" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="all-playlists-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg modal-xl" role="document"><div class="modal-content"><div class="modal-header"><h5 id="all-playlists-modal-title" class="modal-title">{{ $t(&#39;all-playlists&#39;) }}</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><div class="row"><div v-if="playlists === null" class="col-12">{{ $t(&#39;please-wait&#39;) }} <font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-spin">.</font-awesome-icon></div><div v-else-if="playlists.length" class="col-12"><div class="table-responsive"><table id="playlistsTable" class="table table-striped table-hover table-dark data-table"><thead><tr><th scope="col">#</th><th scope="col">{{ $t(&#39;name&#39;) }}</th><th scope="col">{{ $tc(&#39;video&#39;, 2) }}</th><th scope="col">{{ $t(&#39;updated-at&#39;) }}</th><th scope="col">{{ $t(&#39;created-at&#39;) }}</th><th scope="col"></th></tr></thead><tbody>\x3c!-- eslint-disable-next-line vue/require-v-for-key --\x3e<tr v-for="(playlistItem, index) in playlists" class="video"><td>{{ index + 1 }}</td><td>{{ playlistItem.name }}</td><td>{{ playlistItem.videoQuantity }}</td><td>{{ playlistItem.updatedAt|formatDateTime($t(&#39;datetime&#39;)) }}</td><td>{{ playlistItem.createdAt|formatDateTime($t(&#39;datetime&#39;)) }}</td><td><span class="text-nowrap"><button type="button" class="btn btn-sm btn-primary mr-2" data-toggle="tooltip" data-placement="top" :title="$t(&#39;switch-to-playlist&#39;)" @click="switchPlaylist(playlistItem)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw"></font-awesome-icon></button><button type="button" class="btn btn-sm btn-danger" data-toggle="tooltip" data-placement="top" :title="$t(&#39;remove-playlist&#39;)" :disabled="playlistItem.name.toLowerCase() === &#39;general&#39;" @click="removePlaylist(playlistItem)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;trash-alt&#39;]" class="fa-fw"></font-awesome-icon></button></span></td></tr></tbody></table></div></div><div v-else="" class="col-12">{{ $t(&#39;playlists-not-found&#39;) }}</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">{{ $t(&#39;close&#39;) }}</button></div></div></div></div><div id="playlist-form" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="playlist-form-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg modal-xl" role="document"><div class="modal-content"><div class="modal-header"><h5 id="playlist-form-modal-title" class="modal-title"><span v-if="!updateMode">{{ $t(&#39;add-playlist&#39;) }}</span><span v-if="updateMode">{{ $t(&#39;update-playlist&#39;) }}</span></h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><div v-if="!updateMode" class="row"><div class="col-12 col-md-10"><label for="playlist-form-name" class="col-form-label">{{ $t(&#39;name&#39;) }}:</label><input id="playlist-form-name" v-model="playlist.name" type="text" class="form-control" :class="{&#39;is-invalid&#39;: playlist.name === &#39;&#39;}" autocomplete="off"></div><div class="col-12 col-md-2"><div class="custom-control custom-switch pt-2 pt-md-5 float-left mr-3"><input id="playlist-form-active" v-model.number="playlist.active" type="checkbox" value="1" class="custom-control-input"><label class="custom-control-label" for="playlist-form-active">{{ $t(&#39;active&#39;) }}</label></div>\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="clearfix"></div></div></div><div v-if="updateMode" class="row"><div class="col-12 form-search"><label for="playlist-form-search" class="col-form-label">{{ $t(&#39;search-playlist&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;search-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><input id="playlist-form-search" v-model="playlistSearch" type="text" class="form-control" :class="{&#39;is-invalid&#39;: video.playlistId === 0}" autocomplete="off" :placeholder="$t(&#39;name&#39;)"><div v-if="showLoader.playlist" class="fa-icon"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw fa-spin"></font-awesome-icon></div><div class="position-relative"><div v-if="playlistSearchResults.length" class="list-group"><button v-for="playlistItem in playlistSearchResults" :key="playlistItem.id" type="button" class="list-group-item list-group-item-action" @click="selectPlaylist(playlistItem, &#39;update&#39;)">{{ getPlaylistLabel(playlistItem) }}</button></div></div></div><div v-if="playlist.name !== &#39;&#39;" class="col-12"><label for="playlist-form-name" class="col-form-label">{{ $t(&#39;name&#39;) }}:</label><div class="form-row"><div class="col"><input id="playlist-form-name" v-model="playlist.name" type="text" class="form-control" :class="{&#39;is-invalid&#39;: playlist.name === &#39;&#39;}" autocomplete="off" :disabled="playlist.name.toLowerCase() === &#39;general&#39;"></div><div class="col-auto"><button type="button" class="btn btn-primary" :disabled="playlist.name.toLowerCase() === &#39;general&#39;" @click="updatePlaylist()"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;save&#39;]" class="fa-fw"></font-awesome-icon></button></div></div></div><div v-if="playlist.videos.length" class="col-12 pt-3"><div class="table-responsive"><table id="playlistFormTable" class="table table-striped table-hover table-dark data-table"><thead><tr><th scope="col">#</th><th scope="col">{{ $t(&#39;name&#39;) }}</th><th scope="col">{{ $t(&#39;duration&#39;) }}</th><th scope="col" data-orderable="false"></th></tr></thead><tbody>\x3c!-- eslint-disable-next-line vue/require-v-for-key --\x3e<tr v-for="(videoItem, index) in playlist.videos" class="video"><td class="index"><div v-if="index > 0" class="move move-up" @click="moveVideo(videoItem, -1, playlist)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;chevron-right&#39;]" class="fa-fw" :transform="{rotate: -90}"></font-awesome-icon></div><div v-if="index + 1 < playlist.videos.length" class="move move-down" @click="moveVideo(videoItem, 1, playlist)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;chevron-right&#39;]" class="fa-fw" :transform="{rotate: 90}"></font-awesome-icon></div>{{ index + 1 }}</td><td>{{ videoItem.name }}</td><td><span class="text-nowrap">{{ videoItem.duration|formatDuration() }}</span></td><td class="text-center"><span class="text-nowrap"><button type="button" class="btn btn-sm btn-danger" data-toggle="tooltip" data-placement="top" :title="$t(&#39;remove-from-playlist&#39;)" @click="removeVideo(videoItem, index, playlist)"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;trash-alt&#39;]" class="fa-fw"></font-awesome-icon></button></span></td></tr></tbody></table></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">{{ $t(&#39;close&#39;) }}</button><button v-if="!updateMode" type="button" class="btn btn-primary" @click="addPlaylist()">{{ $t(&#39;add&#39;) }}</button></div></div></div></div><div id="video-form" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="video-form-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg modal-xl" role="document"><div class="modal-content"><div class="modal-header"><h5 id="video-form-modal-title" class="modal-title"><span v-if="!updateMode">{{ $t(&#39;add-video&#39;) }}</span><span v-if="updateMode">{{ $t(&#39;update-video&#39;) }}</span></h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><div class="row"><div v-if="!updateMode" class="col-12 col-md-6 form-search"><label for="video-form-video-search" class="col-form-label">{{ $t(&#39;search-video&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;search-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><input id="video-form-video-search" v-model="videoSearch" type="text" class="form-control" autocomplete="off" :placeholder="$t(&#39;name-or-file&#39;)"><div v-if="showLoader.video" class="fa-icon"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw fa-spin"></font-awesome-icon></div><div class="position-relative"><div v-if="videoSearchResults.length" class="list-group">\x3c!-- eslint-disable-next-line vue/require-v-for-key --\x3e<button v-for="(videoItem, index) in videoSearchResults" type="button" class="list-group-item list-group-item-action" @click="selectVideo(index)">{{ videoItem.name + &#39; (&#39; + videoItem.file + &#39;)&#39; }}</button></div></div></div><div v-if="!updateMode" class="col-12 col-md-6 form-search"><label for="video-form-playlist-search" class="col-form-label">{{ $t(&#39;search-playlist&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;search-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><input id="video-form-playlist-search" v-model="playlistSearch" type="text" class="form-control" :class="{&#39;is-invalid&#39;: video.playlistId === 0}" autocomplete="off" :placeholder="getPlaylistLabel(activePlaylist)"><div v-if="showLoader.playlist" class="fa-icon"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw fa-spin"></font-awesome-icon></div><div class="position-relative"><div v-if="playlistSearchResults.length" class="list-group"><button v-for="playlistItem in playlistSearchResults" :key="playlistItem.id" type="button" class="list-group-item list-group-item-action" @click="selectPlaylist(playlistItem, &#39;add-video&#39;)">{{ getPlaylistLabel(playlistItem) }}</button></div></div></div><div class="col-12 col-md-6"><label for="video-form-title-cmd" class="col-form-label">{{ $t(&#39;title-command&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;title-command-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><div class="input-group"><div class="input-group-prepend">\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="input-group-text">!title</div></div><input id="video-form-title-cmd" v-model="video.titleCmd" type="text" class="form-control" autocomplete="off" placeholder=""></div></div><div class="col-12 col-md-6"><label for="video-form-game-cmd" class="col-form-label">{{ $t(&#39;game-command&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;game-command-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><div class="input-group"><div class="input-group-prepend">\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="input-group-text">!game</div></div><input id="video-form-game-cmd" v-model="video.gameCmd" type="text" class="form-control" autocomplete="off" placeholder=""></div></div><div class="col-12"><hr></div><div class="col-12 col-md-6"><label for="video-form-player" class="col-form-label">{{ $t(&#39;player&#39;) }}:</label><select id="video-form-player" v-model="video.player" :disabled="videoSearch.length > 0" class="custom-select"><option value="local" :disabled="!config.hasVideosFolder">{{ $t(&#39;local-video&#39;) }}</option><option value="twitch-clip">{{ $t(&#39;twitch-clip&#39;) }}</option><option value="twitch">{{ $t(&#39;twitch-video&#39;) }}</option><option value="youtube">{{ $t(&#39;youtube-video&#39;) }}</option></select></div><div class="col-12 col-md-6"><label for="video-form-file" class="col-form-label">{{ $t(&#39;file&#39;) }}:</label><input id="video-form-file" v-model="video.file" type="text" class="form-control" :class="{&#39;is-invalid&#39;: isInvalidFile()}" :disabled="videoSearch.length > 0" autocomplete="off" :placeholder="getFilePlaceholder()"></div><div class="col-12 col-md-6"><label for="video-form-name" class="col-form-label">{{ $t(&#39;name&#39;) }}:</label><input id="video-form-name" v-model="video.name" type="text" class="form-control" :class="{&#39;is-invalid&#39;: video.name === &#39;&#39;}" :disabled="videoSearch.length > 0" autocomplete="off"></div><div class="col-12 col-md-6"><label for="video-form-subname" class="col-form-label">{{ $t(&#39;sub-name&#39;) }}:</label><input id="video-form-subname" v-model="video.subName" type="text" class="form-control" :disabled="videoSearch.length > 0" autocomplete="off"></div><div class="col-12 col-md-6"><label for="video-form-duration-hours" class="col-form-label">{{ $t(&#39;duration&#39;) }}:</label><div class="form-row"><div class="col"><div class="input-group"><input id="video-form-duration-hours" v-model.number="video.durationHours" type="number" min="0" max="23" class="form-control" :class="{&#39;is-invalid&#39;: isInvalidHours()}" :disabled="videoSearch.length > 0" :placeholder="$t(&#39;hours&#39;).toLowerCase()"><div class="input-group-append">\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="input-group-text">h</div></div></div></div><div class="col"><div class="input-group"><input id="video-form-duration-min" v-model.number="video.durationMin" type="number" min="0" max="59" class="form-control" :class="{&#39;is-invalid&#39;: isInvalidMin()}" :disabled="videoSearch.length > 0" :placeholder="$t(&#39;min&#39;).toLowerCase()"><div class="input-group-append">\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="input-group-text">m</div></div></div></div><div class="col"><div class="input-group"><input id="video-form-duration-sec" v-model.number="video.durationSec" type="number" min="0" max="59" class="form-control" :class="{&#39;is-invalid&#39;: isInvalidSec()}" :disabled="videoSearch.length > 0" :placeholder="$t(&#39;sec&#39;).toLowerCase()"><div class="input-group-append">\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="input-group-text">s</div></div></div></div></div></div><div class="col-12 col-md-6 pt-3 pt-md-5"><div class="custom-control custom-switch float-left mr-3"><input id="video-form-played" v-model.number="video.played" type="checkbox" value="1" class="custom-control-input"><label class="custom-control-label" for="video-form-played">{{ $t(&#39;played&#39;) }}</label></div><div class="custom-control custom-switch float-left mr-3"><input id="video-form-skipped" v-model.number="video.skipped" type="checkbox" value="1" class="custom-control-input"><label class="custom-control-label" for="video-form-skipped">{{ $t(&#39;skipped&#39;) }}</label></div><div class="custom-control custom-switch float-left"><input id="video-form-autofill" v-model.number="video.autofill" type="checkbox" value="1" class="custom-control-input" :disabled="isDisabledAutofill()"><label class="custom-control-label" for="video-form-autofill" data-toggle="tooltip" data-placement="top" :title="$t(&#39;autofill-tooltip&#39;)">{{ $t(&#39;autofill&#39;) }}</label></div>\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="clearfix"></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">{{ $t(&#39;close&#39;) }}</button><button v-if="!updateMode" type="button" class="btn btn-primary" @click="addVideo()">{{ $t(&#39;add&#39;) }}</button><button v-if="updateMode" type="button" class="btn btn-primary" @click="updateVideo()">{{ $t(&#39;update&#39;) }}</button></div></div></div></div><div id="remove-playlist" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="remove-playlist-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg modal-xl" role="document"><div class="modal-content"><div class="modal-header"><h5 id="remove-playlist-modal-title" class="modal-title">{{ $t(&#39;remove-playlist&#39;) }}</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><div class="row"><div class="col-12 form-search"><label for="remove-playlist-search" class="col-form-label">{{ $t(&#39;search-playlist&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;search-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><input id="remove-playlist-search" v-model="playlistSearch" type="text" class="form-control" :class="{&#39;is-invalid&#39;: video.playlistId === 0}" autocomplete="off" :placeholder="$t(&#39;name&#39;)"><div v-if="showLoader.playlist" class="fa-icon"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw fa-spin"></font-awesome-icon></div><div class="position-relative"><div v-if="playlistSearchResults.length" class="list-group"><button v-for="playlistItem in playlistSearchResults" :key="playlistItem.id" type="button" class="list-group-item list-group-item-action" @click="selectPlaylist(playlistItem, &#39;remove&#39;)">{{ getPlaylistLabel(playlistItem) }}</button></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">{{ $t(&#39;close&#39;) }}</button><button type="button" class="btn btn-danger" :disabled="playlist.name.toLowerCase() === &#39;general&#39;" @click="removePlaylist()">{{ $t(&#39;remove&#39;) }}</button></div></div></div></div><div id="merge-playlists" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="merge-playlists-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg modal-xl" role="document"><div class="modal-content"><div class="modal-header"><h5 id="merge-playlists-modal-title" class="modal-title">{{ $t(&#39;merge-playlists&#39;) }}</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><div class="row"><div class="col-12 col-md-4 form-search"><label for="merge-playlists-search-target" class="col-form-label">{{ $t(&#39;search-playlist-target&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;search-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><input id="merge-playlists-search-target" v-model="playlistTargetSearch" type="text" class="form-control" :class="{&#39;is-invalid&#39;: video.playlistId === 0}" autocomplete="off" :placeholder="getPlaylistLabel(activePlaylist)"><div v-if="showLoader.playlist" class="fa-icon"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw fa-spin"></font-awesome-icon></div><div class="position-relative"><div v-if="showPlaylistTargetSearchResults()" class="list-group"><button v-for="playlistItem in playlistSearchResults" :key="playlistItem.id" type="button" class="list-group-item list-group-item-action" @click="selectPlaylist(playlistItem, &#39;merge-target&#39;)">{{ getPlaylistLabel(playlistItem) }}</button></div></div></div><div class="col-12 col-md-4"><label for="merge-playlists-method" class="col-form-label">{{ $t(&#39;method&#39;) }}:</label><select id="merge-playlists-method" v-model.number="merge.method" class="custom-select"><option value="1">{{ $t(&#39;append&#39;) }}</option><option value="-1">{{ $t(&#39;prepend&#39;) }}</option></select></div><div class="col-12 col-md-4 form-search"><label for="merge-playlists-search-source" class="col-form-label">{{ $t(&#39;search-playlist-source&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;search-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><input id="merge-playlists-search-source" v-model="playlistSourceSearch" type="text" class="form-control" :class="{&#39;is-invalid&#39;: video.playlistId === 0}" autocomplete="off" :placeholder="$t(&#39;name&#39;)"><div v-if="showLoader.playlist" class="fa-icon"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw fa-spin"></font-awesome-icon></div><div class="position-relative"><div v-if="showPlaylistSourceSearchResults()" class="list-group"><button v-for="playlistItem in playlistSearchResults" :key="playlistItem.id" type="button" class="list-group-item list-group-item-action" @click="selectPlaylist(playlistItem, &#39;merge-source&#39;)">{{ getPlaylistLabel(playlistItem) }}</button></div></div></div><div class="col-12 col-md-6 col-xl-4 offset-md-6 offset-xl-8"><label for="merge-playlists-from" class="col-form-label">{{ $t(&#39;videos-from-to&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;videos-from-to-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><div class="form-row"><div class="col"><div class="input-group"><div class="input-group-prepend">\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="input-group-text">{{ $t(&#39;from&#39;).toLowerCase() }}</div></div><input id="merge-playlists-from" v-model.number="merge.from" type="number" min="0" class="form-control" :class="{&#39;is-invalid&#39;: merge.to > 0 &amp;&amp; merge.from > merge.to}" :placeholder="$t(&#39;from&#39;)"></div></div><div class="col"><div class="input-group"><div class="input-group-prepend">\x3c!-- eslint-disable-next-line vue/singleline-html-element-content-newline --\x3e<div class="input-group-text">{{ $t(&#39;to&#39;).toLowerCase() }}</div></div><input id="merge-playlists-to" v-model.number="merge.to" type="number" min="0" class="form-control" :class="{&#39;is-invalid&#39;: merge.to > 0 &amp;&amp; merge.to < merge.from}" :placeholder="$t(&#39;to&#39;)"></div></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">{{ $t(&#39;close&#39;) }}</button><button type="button" class="btn btn-primary" @click="mergePlaylists()">{{ $t(&#39;merge&#39;) }}</button></div></div></div></div><div id="switch-playlist" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="switch-playlist-modal-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg modal-xl" role="document"><div class="modal-content"><div class="modal-header"><h5 id="switch-playlist-modal-title" class="modal-title">{{ $t(&#39;switch-playlist&#39;) }}</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="modal-body"><div class="row"><div class="col-12 form-search"><label for="switch-playlist-search" class="col-form-label">{{ $t(&#39;search-playlist&#39;) }}:&nbsp;<span class="d-inline-block" data-toggle="tooltip" data-placement="top" :title="$t(&#39;search-tooltip&#39;)"><font-awesome-icon :icon="[&#39;far&#39;, &#39;question-circle&#39;]" class="fa-fw"></font-awesome-icon></span></label><input id="switch-playlist-search" v-model="playlistSearch" type="text" class="form-control" :class="{&#39;is-invalid&#39;: video.playlistId === 0}" autocomplete="off" :placeholder="$t(&#39;name&#39;)"><div v-if="showLoader.playlist" class="fa-icon"><font-awesome-icon :icon="[&#39;fas&#39;, &#39;sync&#39;]" class="fa-fw fa-spin"></font-awesome-icon></div><div class="position-relative"><div v-if="playlistSearchResults.length" class="list-group"><button v-for="playlistItem in playlistSearchResults" :key="playlistItem.id" type="button" class="list-group-item list-group-item-action" @click="selectPlaylist(playlistItem, &#39;switch&#39;)">{{ getPlaylistLabel(playlistItem) }}</button></div></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">{{ $t(&#39;close&#39;) }}</button><button type="button" class="btn btn-primary" @click="switchPlaylist()">{{ $t(&#39;switch&#39;) }}</button></div></div></div></div></div>',mixins:[e.default,i.default,o.default],data:function(){return{activePlaylist:{videos:[]},config:{hasClientIdToken:!1,hasVideosFolder:!1,hasYoutubeToken:!1},currentVideoStart:0,dataTable:null,updateMode:!1,merge:{target:{},method:1,source:{},from:0,to:0},playlist:{id:0,name:"",active:!1,videos:[]},playlists:null,playlistId:0,playlistIndex:0,playlistSearch:"",playlistSearchResults:[],playlistSearchTimeout:"",playlistSourceSearch:"",playlistTargetSearch:"",showLoader:{playlist:!1,video:!1},video:{id:0,name:"",subName:"",file:"",played:!1,skipped:!1,duration:0,durationHours:0,durationMin:0,durationSec:0,player:"youtube",playlistId:0,titleCmd:"",gameCmd:"",autofill:!0},videoIndex:0,videoSearch:"",videoSearchResults:[],videoSearchTimeout:""}},watch:{"playlist.id":function(){this.getPlaylist()},"video.file":function(){"local"===this.video.player&&!0===this.video.autofill&&this.video.file===this.$options.filters.localFile(this.video.file)?this.getLocalVideoMeta():"local"===this.video.player&&this.video.file!==this.$options.filters.localFile(this.video.file)&&(this.video.file=this.$options.filters.localFile(this.video.file)),"twitch-clip"===this.video.player&&!0===this.video.autofill&&this.video.file===this.$options.filters.twitchClipFile(this.video.file)?this.getTwitchClipMeta():"twitch-clip"===this.video.player&&this.video.file!==this.$options.filters.twitchClipFile(this.video.file)&&(this.video.file=this.$options.filters.twitchClipFile(this.video.file)),"twitch"===this.video.player&&!0===this.video.autofill&&this.video.file===this.$options.filters.twitchVideoFile(this.video.file)?this.getTwitchVideoMeta():"twitch"===this.video.player&&this.video.file!==this.$options.filters.twitchVideoFile(this.video.file)&&(this.video.file=this.$options.filters.twitchVideoFile(this.video.file)),"youtube"===this.video.player&&!0===this.video.autofill&&this.video.file===this.$options.filters.youtubeFile(this.video.file)?this.getYoutubeVideoMeta():"youtube"===this.video.player&&this.video.file!==this.$options.filters.youtubeFile(this.video.file)&&(this.video.file=this.$options.filters.youtubeFile(this.video.file))},"video.durationHours":function(){this.calculateVideoDuration(this.video.durationHours,this.video.durationMin,this.video.durationSec)},"video.durationMin":function(){this.calculateVideoDuration(this.video.durationHours,this.video.durationMin,this.video.durationSec)},"video.durationSec":function(){this.calculateVideoDuration(this.video.durationHours,this.video.durationMin,this.video.durationSec)},"video.player":function(){this.video.autofill=!0,("local"===this.video.player&&!1===this.config.hasVideosFolder||/twitch/.test(this.video.player)&&!1===this.config.hasClientIdToken||"youtube"===this.video.player&&!1===this.config.hasYoutubeToken)&&(this.video.autofill=!1),!0===this.video.autofill&&("local"===this.video.player&&this.getLocalVideoMeta(),"twitch-clip"===this.video.player&&this.getTwitchClipMeta(),"twitch"===this.video.player&&this.getTwitchVideoMeta(),"youtube"===this.video.player&&this.getYoutubeVideoMeta())},playlistSearch:function(){if(this.playlistSearch.length>=3&&!/\(|\)/g.test(this.playlistSearch)){let t=this;this.showLoader.playlist=!0,clearTimeout(this.playlistSearchTimeout),this.playlistSearchTimeout=setTimeout((function(){t.getPlaylistSearchResults(),t.showLoader.playlist=!1}),500)}else 0===this.playlistSearch.length&&(this.playlistSearchResults=[],this.video.playlistId=this.activePlaylist.id)},playlistSourceSearch:function(){this.playlistSourceSearch.length>=3&&!/\(|\)/g.test(this.playlistSourceSearch)?this.playlistSearch=this.playlistSourceSearch:this.playlistSourceSearch.length<3&&(this.merge.source={})},playlistTargetSearch:function(){this.playlistTargetSearch.length>=3&&!/\(|\)/g.test(this.playlistTargetSearch)?this.playlistSearch=this.playlistTargetSearch:this.playlistTargetSearch.length<3&&(this.merge.target={id:this.activePlaylist.id,name:this.activePlaylist.name})},videoSearch:function(){if(this.videoSearch.length>=3){let t=this;this.showLoader.video=!0,clearTimeout(this.videoSearchTimeout),this.videoSearchTimeout=setTimeout((function(){t.getVideoSearchResults(),t.showLoader.video=!1}),500)}else 0===this.videoSearch.length&&(this.videoSearchResults=[],jQuery("#video-form").trigger("hidden.bs.modal"))}},mounted:function(){let t=this;this.getActivePlaylist(),this.getPlaylistConfig(),jQuery(".playlist .modal").on("shown.bs.modal",(function(){jQuery(this).find('input[type="text"]').first().trigger("focus"),"merge-playlist"===jQuery(this).attr("id")&&(t.merge.target={id:t.activePlaylist.id,name:t.activePlaylist.name})})),jQuery("#playlist-form, #remove-playlist, #switch-playlist").on("hidden.bs.modal",(function(){t.playlist={id:0,name:"",active:!1,videos:[]},t.updateMode=!1,t.playlistSearch=""})),jQuery("#merge-playlists").on("hidden.bs.modal",(function(){t.merge={target:{id:t.activePlaylist.id,name:t.activePlaylist.name},method:1,source:{},from:0,to:0},t.playlistSearch="",t.playlistSourceSearch="",t.playlistTargetSearch=""})),jQuery("#video-form").on("hidden.bs.modal",(function(){t.video={id:0,name:"",subName:"",file:"",played:!1,skipped:!1,duration:0,durationHours:0,durationMin:0,durationSec:0,autofill:!0,player:"youtube",playlistId:t.activePlaylist.id,titleCmd:"",gameCmd:""},t.updateMode=!1,t.videoSearch="",t.playlistSearch=""})),jQuery("#all-playlists").on("shown.bs.modal",(function(){t.getPlaylists()}))},methods:{addPlaylist:function(){if("function"==typeof socketWrite&&0===jQuery("#playlist-form .is-invalid").length){const t={method:"addPlaylist",args:{channel:this.$root._route.params.channel.toLowerCase(),playlist:this.playlist},env:"node"};socketWrite(t),jQuery("#playlist-form").modal("hide")}},addVideo:function(){if("function"==typeof socketWrite&&0===jQuery("#video-form .is-invalid").length){const t={method:"addVideo",args:{channel:this.$root._route.params.channel.toLowerCase(),video:this.video},env:"node"};socketWrite(t),jQuery("#video-form").modal("hide")}},calculateVideoDuration:function(t,e,i){const o=""===t?0:t,l=""===e?0:e,a=""===i?0:i;this.video.duration=60*o*60+60*l+a},clearActivePlaylist:function(){if("function"==typeof socketWrite&&confirm(this.$t("confirm-clear-playlist"))){const t={method:"clearActivePlaylist",args:{channel:this.$root._route.params.channel.toLowerCase()},env:"node"};socketWrite(t)}},getActivePlaylist:function(){if("function"==typeof socketWrite){const t={method:"getActivePlaylist",args:{channel:this.$root._route.params.channel.toLowerCase()},env:"node"};socketWrite(t)}},getFilePlaceholder:function(){return"local"===this.video.player?this.$t("local-video-placeholder"):"twitch-clip"===this.video.player?this.$t("twitch-clip-placeholder"):"twitch"===this.video.player?this.$t("twitch-video-placeholder"):"youtube"===this.video.player?this.$t("youtube-video-placeholder"):void 0},getLocalVideoMeta:function(){if("function"==typeof socketWrite){const t={method:"getLocalVideoMeta",args:{channel:this.$root._route.params.channel.toLowerCase(),file:this.video.file},env:"node"};socketWrite(t)}},getPlaylist:function(){if("function"==typeof socketWrite){const t={method:"getPlaylist",args:{channel:this.$root._route.params.channel.toLowerCase(),playlist:this.playlist},env:"node"};socketWrite(t)}},getPlaylistConfig:function(){if("function"==typeof socketWrite){const t={method:"getPlaylistConfig",args:{channel:this.$root._route.params.channel.toLowerCase()},env:"node"};socketWrite(t)}},getPlaylistLabel:function(t){return t.name+" ("+(t.active?"active, ":"")+t.videoQuantity+" "+this.$tc("video",t.videoQuantity)+")"},getPlaylists:function(){if("function"==typeof socketWrite){const t={method:"getPlaylists",args:{channel:this.$root._route.params.channel.toLowerCase()},env:"node"};socketWrite(t)}},getPlaylistSearchResults:function(){if("function"==typeof socketWrite){const t={method:"getPlaylistSearchResults",args:{channel:this.$root._route.params.channel.toLowerCase(),playlistSearch:this.playlistSearch},env:"node"};socketWrite(t)}},getTwitchClipMeta:function(){if("function"==typeof socketWrite){const t={method:"getTwitchClipMeta",args:{channel:this.$root._route.params.channel.toLowerCase(),file:this.video.file},env:"node"};socketWrite(t)}},getTwitchVideoMeta:function(){if("function"==typeof socketWrite){const t={method:"getTwitchVideoMeta",args:{channel:this.$root._route.params.channel.toLowerCase(),file:this.video.file},env:"node"};socketWrite(t)}},getVideoCommands:function(t){let e="";return t.titleCmd.length&&(e+="!title "+t.titleCmd),t.titleCmd.length&&t.gameCmd.length&&(e+="<br>"),t.gameCmd.length&&(e+="!game "+t.gameCmd),e},getVideoPlayerIcon:function(t){let e=["far","question-circle"];return"local"===t?e=["fas","hdd"]:/twitch/.test(t)?e=["fab","twitch"]:"youtube"===t&&(e=["fab","youtube"]),e},getVideoSearchResults:function(){if("function"==typeof socketWrite){const t={method:"getVideoSearchResults",args:{channel:this.$root._route.params.channel.toLowerCase(),videoSearch:this.videoSearch},env:"node"};socketWrite(t)}},getYoutubeVideoMeta:function(){if("function"==typeof socketWrite){const t={method:"getYoutubeVideoMeta",args:{channel:this.$root._route.params.channel.toLowerCase(),file:this.video.file},env:"node"};socketWrite(t)}},isDisabledAutofill:function(){return!this.config.hasYoutubeToken&&"youtube"===this.video.player||!this.config.hasVideosFolder&&"local"===this.video.player||!this.config.hasClientIdToken&&/twitch/.test(this.video.player)},isInvalidFile:function(){return""===this.video.file||("local"===this.video.player&&!/(.*)(\.mp4)$/i.test(this.video.file)||"youtube"===this.video.player&&11!==this.video.file.length)},isInvalidHours:function(){const t=this.video.durationHours;return t<0||t>23},isInvalidMin:function(){const t=this.video.durationMin;return t<0||t>59},isInvalidSec:function(){const t=this.video.durationHours,e=this.video.durationMin,i=this.video.durationSec;return i<0||i>59||t+e+i===0},mergePlaylists:function(){if("function"==typeof socketWrite&&"number"==typeof this.merge.target.id&&"number"==typeof this.merge.source.id&&0===jQuery("#merge-playlists .is-invalid").length){jQuery("#merge-playlists").modal("hide");const t={method:"mergePlaylists",args:{channel:this.$root._route.params.channel.toLowerCase(),merge:this.merge},env:"node"};socketWrite(t)}},moveVideo:function(t,e,i){if("function"==typeof socketWrite){const o={method:"moveVideo",args:{channel:this.$root._route.params.channel.toLowerCase(),direction:e,playlist:{id:i.id,name:i.name},video:t},env:"node"};socketWrite(o)}},popoutPlayer:function(){const t=this.$router.resolve({name:"player",params:{channel:this.$root._route.params.channel}}).href;window.open(t,"Player","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=1280,height=800")},removeVideo:function(t,e,i){if("function"==typeof socketWrite&&confirm(this.$t("confirm-remove-video",[t.name]))){const o={method:"removeVideo",args:{channel:this.$root._route.params.channel.toLowerCase(),playlist:{id:i.id,name:i.name},video:t,videoIndex:e},env:"node"};socketWrite(o)}},removeVideosByFlagFromActivePlaylist:function(t,e){if("function"==typeof socketWrite&&confirm(this.$t("confirm-remove-flagged-videos",[this.$t(t).toLowerCase()]))){const i={method:"removeVideosByFlagFromActivePlaylist",args:{channel:this.$root._route.params.channel.toLowerCase(),flag:t,value:e},env:"node"};socketWrite(i)}},resetActivePlaylist:function(){if("function"==typeof socketWrite&&confirm(this.$t("confirm-reset-playlist"))){const t={method:"resetActivePlaylist",args:{channel:this.$root._route.params.channel.toLowerCase()},env:"node"};socketWrite(t)}},removePlaylist:function(t){if(void 0===t&&(t=this.playlist),"function"==typeof socketWrite&&t.id>0&&null!==this.playlists&&this.playlists.length>1&&confirm(this.$t("confirm-remove-playlist",[t.name]))){const e={method:"removePlaylist",args:{channel:this.$root._route.params.channel.toLowerCase(),playlist:{id:t.id,name:t.name,active:t.active}},env:"node"};socketWrite(e),jQuery("#remove-playlist").modal("hide")}},selectPlaylist:function(t,e){"add-video"===e?(this.video.playlistId=t.id,this.playlistSearch=this.getPlaylistLabel(t)):"merge-target"===e?(this.merge.target=t,this.playlistTargetSearch=this.getPlaylistLabel(t)):"merge-source"===e?(this.merge.source=t,this.playlistSourceSearch=this.getPlaylistLabel(t)):(this.playlist.id=t.id,this.playlist.name=t.name,this.playlist.active=t.active,this.playlistSearch=this.getPlaylistLabel(t),console.log(t.videos)),this.playlistSearchResults=[]},selectVideo:function(t){let e=this.videoSearchResults[t];e.channel=this.$root._route.params.channel.toLowerCase(),this.videoSearchResults=[],this.setVideoDurationToForm(e),this.video.autofill=!1,this.video.id=e.id,this.video.name=e.name,this.video.subName=e.subName,this.video.file=e.file,this.video.duration=e.duration,this.video.player=e.player,this.video.updatedAt=e.updatedAt,this.video.createdAt=e.createdAt,this.video.played=0,this.video.skipped=0,this.video.titleCmd="",this.video.gameCmd=""},setActivePlaylist:function(t){this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()&&(this.activePlaylist=t.activePlaylist,this.video.playlistId=t.activePlaylist.id,this.merge.target={id:t.activePlaylist.id,name:t.activePlaylist.name},this.initDataTable())},setPlaylist:function(t){this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()&&(this.playlist=t.playlist,this.initDataTable())},setPlaylistConfig:function(t){this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()&&(this.config=t.config)},setPlaylists:function(t){this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()&&(null!==this.playlists&&this.playlists.length===t.playlists.length||(this.playlists=t.playlists,this.initDataTable()))},setPlaylistSearchResults:function(t){this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()&&(this.playlistSearchResults=t.playlists)},setVideoMetaToForm:function(t){this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()&&(this.setVideoDurationToForm(t),this.video.name=t.name,this.video.subName=t.subName)},setVideoDurationToForm:function(t){if(this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()){const e=moment.duration(parseInt(t.duration),"s");this.video.durationHours=e.hours(),this.video.durationMin=e.minutes(),this.video.durationSec=e.seconds()}},setVideoSearchResults:function(t){this.$root._route.params.channel.toLowerCase()===t.channel.toLowerCase()&&(this.videoSearchResults=t.videos)},showPlaylistForm:function(){jQuery("#playlist-form").modal("show"),this.updateMode=!0},showPlaylistSourceSearchResults:function(){return this.playlistSearchResults.length&&this.playlistSourceSearch.length&&!/\(|\)/g.test(this.playlistSourceSearch)},showPlaylistTargetSearchResults:function(){return this.playlistSearchResults.length&&this.playlistTargetSearch.length&&!/\(|\)/g.test(this.playlistTargetSearch)},showVideoForm:function(t,e){this.video=this.activePlaylist.videos[e],this.videoIndex=e,this.updateMode=!0;const i=moment.duration(parseInt(this.video.duration),"s");this.video.durationHours=i.hours(),this.video.durationMin=i.minutes(),this.video.durationSec=i.seconds(),jQuery("#video-form").modal("show")},switchPlaylist:function(t){if("function"==typeof socketWrite){const e={method:"switchPlaylist",args:{channel:this.$root._route.params.channel.toLowerCase(),playlist:void 0===t?this.playlist:t},env:"node"};socketWrite(e),void 0===t?jQuery("#switch-playlist").modal("hide"):jQuery("#all-playlists").modal("hide")}},updatePlaylist:function(){if("function"==typeof socketWrite&&0===jQuery("#playlist-form .is-invalid").length){const t={method:"updatePlaylist",args:{channel:this.$root._route.params.channel.toLowerCase(),playlist:this.playlist},env:"node"};socketWrite(t)}},updateVideo:function(t,e,i){if("function"==typeof socketWrite&&(0===jQuery("#video-form .is-invalid").length||void 0!==t)){const o={method:"updateVideo",args:{channel:this.$root._route.params.channel.toLowerCase(),playlist:{id:void 0===i?this.activePlaylist.id:i.id,name:void 0===i?this.activePlaylist.name:i.name},video:void 0===t?this.video:t},env:"node"};socketWrite(o),void 0===t?(this.videoIndex=0,this.updateMode=!1,jQuery("#video-form").modal("hide")):(this.btnAnimation(event.target,"success"),this.updateDataTableRow(e,"playlistTable"))}}}};t.default=a}));